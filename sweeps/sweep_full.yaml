# Full hyperparameter sweep
# 전체 하이퍼파라미터 최적화 (Bayesian search with early termination)

name: reid_full_sweep
method: bayes

metric:
  name: val/mAP
  goal: maximize

parameters:
  # 학습률: 로그 스케일로 선택된 이산값
  # sweep_lr 결과를 바탕으로 낮은 범위에 집중
  base_lr:
    values: [0.00005, 0.000075, 0.0001, 0.00015, 0.0002]
  
  # Weight decay: 일반적인 범위
  weight_decay:
    values: [0.0001, 0.0003, 0.0005, 0.0007, 0.001]
  
  # Warmup factor: 작은 범위
  warmup_factor:
    values: [0.01, 0.03, 0.05, 0.07, 0.1]
  
  # Warmup iterations
  warmup_iters:
    values: [0, 10, 20]
  
  # Triplet loss margin
  margin:
    values: [0.2, 0.25, 0.3, 0.35, 0.4]
  
  # 배치 크기: GPU 메모리 안정성을 위해 64 제거
  # 14GB GPU에서 32, 48은 안전함
  ims_per_batch:
    values: [32, 48]

# 실험 수 감소 (30 → 15)
# 메모리 누적 문제를 줄이고 안정성 확보
count: 15
results_dir_base: ./log/sweep_full

# Early termination 비활성화
# GPU 메모리 누적 문제를 방지하기 위해 임시 비활성화
# 모든 실험이 충분한 epoch를 진행하여 메모리 정리 시간 확보
# early_terminate:
#   type: hyperband
#   min_iter: 3          # 최소 30 epoch (10 epoch마다 평가하므로)
#   max_iter: 12         # 최대 120 epoch
#   s: 2                 # Hyperband의 aggressiveness (높을수록 더 공격적)
#   eta: 3               # 각 단계에서 유지할 실험 비율 (1/eta)

